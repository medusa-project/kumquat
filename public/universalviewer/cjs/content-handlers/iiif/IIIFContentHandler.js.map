{"version":3,"file":"IIIFContentHandler.js","sourceRoot":"","sources":["../../../../src/content-handlers/iiif/IIIFContentHandler.ts"],"names":[],"mappings":"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"}